(()=>{"use strict";var e,t={871:(e,t,n)=>{var a,r=n(861),i=n(757),c=n.n(i),o=function(){var e=(location.hash.slice(1).toLowerCase()||"/").split("/");return{resource:e[1]||null,id:e[2]||null,verb:e[3]||null}},s=(a=null,(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=8;break}return e.next=3,fetch("/assets/json/images.json");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))));const u={createFragmentFromString:function(e){var t=document.createElement("template");return t.innerHTML=e,t.content},parseRequestURL:o,getRoute:function(){var e=o();return(e.resource?"#/".concat(e.resource):"#/")+(e.id?"/:id":"")+(e.verb?"/".concat(e.verb):"")},getImagesInfo:s,shuffleArray:function(e){for(var t=Array.from(e),n=t.length-1;n>0;n-=1){var a=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[a],t[a]=r}return t},getSecondsCounter:function(){var e=[];return function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=(new Date).getTime();e.forEach((function(e){e(a-n)})),setTimeout(t.bind(null,a),1e3)}(),{addObserver:function(t){return e.push(t)},removeObserver:function(t){return e.splice(e.indexOf(t),1)},clear:function(){e.length=0}}}},l=function(e){var t,n,a,r=document.createElement("header"),i=e.nav&&!Array.isArray(e.nav);return e.nav&&r.append(function(e,t){var n=document.createElement("nav");if(n.classList.add("app-nav"),t){var a=document.createElement("button");a.innerText=e.title,a.classList.add("back"),a.addEventListener("click",(function(){window.history.back()})),n.append(a)}else{var r=document.createElement("a");r.classList.add("app-logo"),r.href="#";var i=document.createElement("img");i.src="./assets/svg/app-logo.svg",i.alt="",r.append(i);var c=document.createElement("ul");c.classList.add("nav-list"),e.forEach((function(e){var t=document.createElement("li");t.classList.add("nav-item"),t.innerText=e.title,e.active&&t.classList.add("active"),t.addEventListener("click",(function(){window.location=e.href})),c.append(t)})),n.append(r),n.append(c)}return n}(e.nav,i)),r.append((t=e.settingsHref,n=i,(a=document.createElement("button")).classList.add("app-settings"),n&&a.classList.add("active"),a.addEventListener("click",(function(){n?window.history.back():window.location=t})),a)),r};var d=n(785);const p=function(e,t,n,a){var r=t||"auto",i=n||"auto",c=document.createElement("button");return c.style.width=r,c.style.height=i,c.classList.add("button"),c.innerText=e,a&&"function"==typeof a&&c.addEventListener("click",a),c},m=function(e){var t=document.createDocumentFragment();return t.append(function(e){var t=u.createFragmentFromString('<div class="settings"> <div class="volume-container"> <h2>Volume</h2> <div class="controls"> <input type="range" class="volume-picker" id="volume"/> <div class="buttons"> <button class="quiet"></button> <button class="loud"></button> </div> </div> </div> <div class="time-container"> <h2>Time game</h2> <label for="time-game">Off</label> <label class="switch"> <input type="checkbox" id="time-game"/> <span class="slider round"></span> </label> </div> <div class="answer-time-container"> <h2>Time to answer</h2> <div class="controls"> <button onclick="this.nextElementSibling.stepDown()">-</button> <input disabled="disabled" type="number" id="answ-time" min="0" max="50" onkeydown="return!1" value="20"/> <button onclick="this.previousElementSibling.stepUp()">+</button> </div> </div> <div class="buttons-container"> </div> </div> '),n=t.querySelector(".buttons-container");n.append(p("Default","240px","60px")),n.append(p("Save","240px","60px"));var a=t.querySelector("#volume"),r=function(){var e="linear-gradient(\n      to right,\n      #ffbca2 0%,\n      #ffbca2 ".concat(a.value,"%,\n      #a4a4a4 ").concat(a.value,"%,\n      #a4a4a4 100%\n      )");a.style.background=e};return a.value=e.getVolume(),r(),a.addEventListener("input",(function(){r(),e.setVolume(a.value)})),[].concat((0,d.Z)(n.children),(0,d.Z)(t.querySelectorAll(".answer-time-container button")),[t.querySelector(".slider.round"),a]).forEach((function(t){t.addEventListener("mouseup",(function(){return e.playSound("/assets/audio/click.wav")}))})),t}(e)),t};const v=function(e){var t=e.caption,n=e.image,a=e.popup,r=e.href,i=document.createElement("div");return i.classList.add("card"),t&&i.append(function(e){var t=document.createElement("div");if(t.classList.add("caption"),e&&e.name){var n=document.createElement("span");n.classList.add("name"),n.innerText=e.name,t.append(n)}if(e&&e.value){var a=document.createElement("span");a.classList.add("value"),a.innerText=e.value,t.append(a)}return t}(t)),i.append(function(e,t,n){var a,r=document.createElement("div");return r.classList.add("content"),r.append(((a=document.createElement("div")).classList.add("image"),a.style.backgroundImage="url(".concat(e.url,")"),e.shouldFade&&a.classList.add("fade"),"highlightAnswerAs"in e&&a.addEventListener("click",(function(){a.innerHTML="";var t=document.createElement("div");t.classList.add("filter"),t.classList.add(e.highlightAnswerAs?"right":"not-right"),a.append(t)})),a)),t&&r.append(function(e){var n=document.createElement("div");n.classList.add("popup");var a=function(){return n.classList.toggle("active")};return t.desc?(t.isActive&&n.classList.add("active"),"truthSign"in t.desc?(n.classList.add("guess-result"),n.classList.add(t.desc.truthSign?"right":"not-right")):(e.addEventListener("click",a),n.append(function(e){var t=document.createElement("div");if(t.classList.add("description"),e&&e.title){var n=document.createElement("span");n.classList.add("title"),n.innerText=e.title,t.append(n)}if(e&&e.text){var a=document.createElement("span");a.classList.add("text"),a.innerText=e.text,t.append(a)}return t}(t.desc)))):(n.classList.add("retry-btn"),n.append(function(e,t){var n=document.createElement("div");n.classList.add("inner"),n.innerText="Play again";var a=document.createElement("button");return a.classList.add("retry-button"),a.addEventListener("click",(function(e){e.stopPropagation(),window.location=t})),a.append(n),a}(0,t.href)),e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",a)),n}(r)),n&&r.addEventListener("click",(function(){window.location=n})),r}(n,a,r)),i},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.classList.add("mesh"),t&&n.classList.add("five-cells"),e.forEach((function(e){n.append(v(e))})),n},g=function(e){var t=document.createDocumentFragment();return t.append(function(e){var t=u.createFragmentFromString('<div class="welcome"> <h1>Art Quiz</h1> <div class="button-group"> </div> </div>'),n=t.querySelector(".button-group");return n.append(p("Artist quiz","240px","60px",(function(){location=e.artistQuiz}))),n.append(p("Pictures quiz","240px","60px",(function(){location=e.pictureQuiz}))),t}(e)),t};var h=1e3;const b=function(e,t,n,a){var r=e*h,i=!1,c=document.createElement("button");c.classList.add("quit-btn"),c.addEventListener("click",(function(){i=!0,n((function(e){e||(i=!1)}))}));var o=document.createElement("input");o.type="range",o.classList.add("time-bar"),o.value=0;var s=document.createElement("span");s.classList.add("time-text"),s.innerText=e;var u=document.createElement("div");return u.classList.add("timer-container"),u.append(c),u.append(o),u.append(s),t&&t.addObserver((function n(c){if(!i&&r>=0){r-=c;var u=e*h,l=Math.abs(r-u),d=Math.round(l/u*100);s.innerText=Math.round(r/h),o.value=d;var p="linear-gradient(\n        to right,\n        #ffbca2 0%,\n        #ffbca2 ".concat(d,"%,\n        #a4a4a4 ").concat(d,"%,\n        #a4a4a4 100%\n        )");o.style.background=p}r<=0&&(t.removeObserver(n),a())})),u},y=function(e,t,n){var a=document.createElement("div");a.classList.add("modal-container"),a.classList.add("active");var r,i,c=document.createElement("div");return c.classList.add("modal-window"),t&&("stars"===t.type?(c.classList.add("symbol"),c.classList.add("stars")):"cube"===t.type&&(c.classList.add("symbol"),c.classList.add("cube")),c.append(((r=document.createElement("div")).classList.add("image-container"),"stars"===t.type?(r.classList.add("symbol"),r.classList.add("stars")):"cube"===t.type?(r.classList.add("symbol"),r.classList.add("cube")):r.append(v(t)),r))),n&&c.append(function(e){var t=document.createElement("div");if(t.classList.add("text"),e&&e.big){var n=document.createElement("span");n.classList.add("big"),n.innerText=e.big,t.append(n)}if(e&&e.middle){var a=document.createElement("span");a.classList.add("middle"),a.innerText=e.middle,t.append(a)}if(e&&e.small){var r=document.createElement("span");r.classList.add("small"),r.innerText=e.small,t.append(r)}if(e&&e.tiny){var i=document.createElement("span");i.classList.add("tiny"),i.innerText=e.tiny,t.append(i)}return t}({tiny:n.tiny,small:n.small,middle:n.middle,big:n.big})),c.append(((i=document.createElement("div")).classList.add("buttons-container"),e.forEach((function(e){var t=p(e.title,"auto","60px");t.classList.add("black"),t.addEventListener("click",e.callback),i.append(t)})),i)),a.append(c),a},L=function(e,t,n,a,r){var i={remove:function(){},before:function(t){return e.append(t)}},c=(0,d.Z)(t).reverse(),o=[];!function s(){var u=c.pop();if(u){var l=function(e,t,a){var i=!1,c=document.createElement("div");c.classList.add("artist-quiz-container");var o,s,u,l,d=function(e,t){var n=y([{title:"Cancel",callback:function(){n.remove(),t(!1)}},{title:"Yes",callback:function(){t(!0),window.history.back()}}],null,{middle:"Do you really want to quit the game?"});e.append(n)}.bind(null,c),m=function(){i||a(c)};return r?c.append(b(r,n,d,m)):c.append(b("∞",null,d,m)),c.append(((l=document.createElement("div")).classList.add("game"),l.append(("Who is the author of this picture?",(o=document.createElement("span")).classList.add("question"),o.innerText="Who is the author of this picture?",o)),l.append(((s=document.createElement("div")).classList.add("masterpice"),s.append(v({caption:null,image:{url:e.href,shouldFade:!1},popup:null,href:null})),s)),l.append(((u=document.createElement("div")).classList.add("buttons-container"),e.variants.forEach((function(e){u.append(p(e,"auto","60px",(function(){i=!0,a(c,e)})))})),u)),l)),c}(u,0,(function(e,t){t===u.author&&o.push(u.href);var n=y([{title:"Next",callback:function(){n.remove(),s()}}],{type:null,caption:null,image:{url:u.href,shouldFade:!1,highlightAnswerAs:t===u.author},popup:{isActive:!0,desc:{truthSign:t===u.author}},href:null},{middle:u.name,tiny:"".concat(u.author,", ").concat(u.year)});e.append(n)}));i.before(l),i.remove(),i=l}else{var d=y([{title:"Home",callback:function(){d.remove(),window.location="/#"}},{title:"Categories",callback:function(){d.remove(),window.history.back()}}],{type:"cube",caption:null,image:null,popup:null,href:null},{middle:"Congratulations!",big:"".concat(o.length,"/").concat(t.length)});e.append(d),a(o)}}()},E=function(e,t,n,a,r){var i={remove:function(){},before:function(t){return e.append(t)}},c=(0,d.Z)(t).reverse(),o=[];!function s(){var u=c.pop();if(u){var l=function(e,t,a){var i=!1,c=document.createElement("div");c.classList.add("picture-quiz-container");var o,s,u,l=function(e,t){var n=y([{title:"Cancel",callback:function(){n.remove(),t(!1)}},{title:"Yes",callback:function(){t(!0),window.history.back()}}],null,{middle:"Do you really want to quit the game?"});e.append(n)}.bind(null,c),d=function(){i||a(c)};return r?c.append(b(r,n,l,d)):c.append(b("∞",null,l,d)),c.append(((u=document.createElement("div")).classList.add("game"),u.append(((o=document.createElement("span")).classList.add("question"),o.innerText="Which is ".concat(e.author," picture?"),o)),u.append(((s=document.createElement("div")).classList.add("masterpice-container"),e.variants.forEach((function(e){var t=v({caption:null,image:{url:e,shouldFade:!1},popup:null,href:null});t.addEventListener("click",(function(){i=!0,a(c,e)})),s.append(t)})),s)),u)),c}(u,0,(function(e,t){t===u.href&&o.push(u.href);var n=y([{title:"Next",callback:function(){n.remove(),s()}}],{type:null,caption:null,image:{url:u.href,shouldFade:!1,highlightAnswerAs:t===u.href},popup:{isActive:!0,desc:{truthSign:t===u.href}},href:null},{middle:u.name,tiny:"".concat(u.author,", ").concat(u.year)});e.append(n)}));i.before(l),i.remove(),i=l}else{var d=y([{title:"Home",callback:function(){d.remove(),window.location="/#"}},{title:"Categories",callback:function(){d.remove(),window.history.back()}}],{type:"cube",caption:null,image:null,popup:null,href:null},{middle:"Congratulations!",big:"".concat(o.length,"/").concat(t.length)});e.append(d),a(o)}}()};var w=n(942),k="artist_quiz",S="picture_quiz";function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){return"/assets/img/".concat(e,"full.jpg")},Q=function(e,t){var n=new Set([t]);do{var a=Math.floor(Math.random()*e.length);n.add(e[a])}while(4!==n.size);return u.shuffleArray(Array.from(n))},A=function(e){var t=new Set,n=[],a=e.map((function(e){var a=O(e.imageNum);return n.push(a),t.add(e.author),{author:e.author,name:e.name,href:a,year:e.year}})),r=Array.from(t),i=a,c=i.splice(a.length/2);return{artistQuizImagesInfo:i,picturesQuizImagesInfo:c,imageHrefs:n,authors:r}},T=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,a,r,i,o,s,l,d,p,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getImagesInfo();case 2:return t=e.sent,n=A(t),a=n.authors,r=n.imageHrefs,i=n.artistQuizImagesInfo,o=n.picturesQuizImagesInfo,s=function(e,t){for(var n=e===k?i:o,c=10*t,s=[],u=c;u<c+10;u+=1){var l=n[u],d=e===k?Q(a,l.author):Q(r,l.href);s.push(z(z({},l),{},{variants:d,game:e,categoryId:t}))}return s},l={getScore:function(){return JSON.parse(localStorage.getItem("score"))},getCategoryScore:function(e,t){var n=l.getScore(),a=n?n[e]:null;return a?a[t]:null},saveScore:function(e,t,n){var a=l.getScore()||{};a[e]||(a[e]={}),a[e][t]=n,localStorage.setItem("score",JSON.stringify(a))}},d=function(e){for(var t=[],n=e===k?0:12,a=0;a<12;a+=1){var r=l.getCategoryScore(e,a),i=r?r.length:null,c=null!==i,o="#/".concat(e,"/").concat(a),s="#/".concat(e,"/").concat(a,"/score");t.push({caption:z({name:"Category ".concat(a)},c?{value:"".concat(i,"/").concat(10)}:{}),image:{url:O(a+n),shouldFade:!c},popup:!!c&&{href:o},href:c?s:o})}return t},p=function(e){var t=l.getCategoryScore(e[0].game,e[0].categoryId);return e.map((function(e){return{caption:null,image:{url:e.href,shouldFade:null==t||!t.includes(e.href)},popup:{desc:{title:e.name,text:"".concat(e.author,", ").concat(e.year)}},href:null}}))},m={setVolume:function(e){document.querySelector("#player").volume=e/100,localStorage.setItem("volume",e)},getVolume:function(){var e=parseFloat(localStorage.getItem("volume"));return Number.isNaN(e)?35:e},playSound:function(e){var t=document.querySelector("#player");t.src=e,t.play()},changeGameTime:function(e){console.log("changeGameTime",e)},getGameTime:function(){return console.log("getGameTime"),10}},e.abrupt("return",{getQuizQuestions:s,getCategories:d,getQuizScore:p,scoreManager:l,settingsManager:m});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const C={getGameManager:T};var q={Welcome:"#/",Settings:"#/settings",ArtistQuizCategories:"#/".concat(k),PictureQuizCategories:"#/".concat(S),ArtistQuizGame:"#/".concat(k,"/:id"),PictureQuizGame:"#/".concat(S,"/:id"),ArtistQuizScore:"#/".concat(k,"/:id/score"),PictureQuizScore:"#/".concat(S,"/:id/score")},P=C.getGameManager(),j=u.getSecondsCounter(),M=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,a,r,i,o,s,d,p,v,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P;case 2:t=e.sent,j.clear(),n=u.getRoute(),a=u.parseRequestURL(),r=a.resource,i=a.id,(o=document.querySelector(".app-container")).classList.remove("welcome"),o.classList.remove("reduced"),o.innerHTML="",s={nav:[{title:"Home",href:q.Welcome,active:n===q.Welcome},{title:"Artist quiz",href:q.ArtistQuizCategories,active:n===q.ArtistQuizCategories},{title:"Picture quiz",href:q.PictureQuizCategories,active:n===q.PictureQuizCategories}],settingsHref:q.Settings},d={nav:{title:"Settings"}},p={settingsHref:q.Settings},v=t.getQuizQuestions(r,i),h=function(e){t.scoreManager.saveScore(r,i,e)},e.t0=n,e.next=e.t0===q.Welcome?18:e.t0===q.Settings?22:e.t0===q.ArtistQuizCategories?25:e.t0===q.PictureQuizCategories?28:e.t0===q.ArtistQuizGame?31:e.t0===q.PictureQuizGame?34:e.t0===q.ArtistQuizScore?37:e.t0===q.PictureQuizScore?40:43;break;case 18:return o.classList.add("welcome"),o.append(l(p)),o.append(g({artistQuiz:q.ArtistQuizCategories,pictureQuiz:q.PictureQuizCategories})),e.abrupt("break",45);case 22:return o.append(l(d)),o.append(m(t.settingsManager)),e.abrupt("break",45);case 25:case 28:return o.append(l(s)),o.append(f(t.getCategories(r))),e.abrupt("break",45);case 31:return o.classList.add("reduced"),L(o,v,j,h,t.settingsManager.getGameTime()),e.abrupt("break",45);case 34:return o.classList.add("reduced"),E(o,v,j,h,t.settingsManager.getGameTime()),e.abrupt("break",45);case 37:case 40:return o.append(l(s)),o.append(f(t.getQuizScore(v),!0)),e.abrupt("break",45);case 43:return window.location=q.Welcome,e.abrupt("break",45);case 45:o.append((t.settingsManager,u.createFragmentFromString('<footer> <a class="rs-logo" href="https://rs.school/"><img src="./assets/svg/rs_school_js.svg" alt=""/></a> <div class="copyright"> <a href="https://github.com/livwvil"><span class="author">livwvil</span></a> <span class="year">2021</span> </div> <audio id="player" hidden></audio> </footer>')));case 46:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=document.createElement("div");I.classList.add("app-container"),document.querySelector("#root").append(I),window.addEventListener("hashchange",M),window.addEventListener("load",M)}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,n,r,i)=>{if(!n){var c=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],o=!0,s=0;s<n.length;s++)(!1&i||c>=i)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(o=!1,i<c&&(c=i));if(o){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[c,o,s]=n,u=0;if(c.some((t=>0!==e[t]))){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);if(s)var l=s(a)}for(t&&t(n);u<c.length;u++)i=c[u],a.o(e,i)&&e[i]&&e[i][0](),e[c[u]]=0;return a.O(l)},n=self.webpackChunkwebpack_boilerplate=self.webpackChunkwebpack_boilerplate||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a.O(void 0,[335],(()=>a(871)));r=a.O(r)})();
//# sourceMappingURL=main-1e4860cfcc0d72821764.js.map